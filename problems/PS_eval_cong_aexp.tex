\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{PS_eval_cong_aexp}
  \pcomment{by ARM 3/7/11}
\end{pcomments}

\pkeywords{
 structural_induction
 modulo
 aexp
 substitution
 congruence
 evaluation
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
Prove that congruence is preserved by arithmetic expressions.  Namely,
prove that
\begin{equation}\label{aeqbmn}
a \equiv b \pmod{n},
\end{equation}
then
\begin{equation}\label{eveaeb}
\meval{e}{a} \equiv \meval{e}{b} \pmod{n},
\end{equation}
for all $e \in \aexp$ (see Section~\bref{aexp_sec}).

\begin{solution}

\begin{proof}
By structural induction on the definition of $e \in \aexp$.

\textbf{base case} $(e \text{ is } \mtt{k})$: then $\meval{e}{a} = k =
\meval{e}{b}$ and~\eqref{eveaeb} follows immediately.

\textbf{base case} $(e \text{ is } x)$: then 
$\meval{e}{a}= a$ and $\meval{e}{b} = b$ and~\eqref{eveaeb}
follows immediately from~\eqref{aeqbmn}.

\textbf{constructor case} $(e \text{ is } \lefbrk e_1 \sumsym e_2 \rhtbrk)$: then
\begin{align*}
\meval{e}{a}
     & = \meval{\lefbrk e_1 \sumsym e_2 \rhtbrk}{a}
          & \text{(the current case of $e$)}\\
     & = \meval{e_1}{a} + \meval{e_2}{a}
          & \text{(def of $\meval{\lefbrk e_1 \sumsym e_2 \rhtbrk}{a}$)}\\
     & \equiv \meval{e_1}{b} + \meval{e_2}{b} \pmod{n}
          & \text{(by structural induction hypothesis for $e_1,e_2$}\\
     &    & \text{and because congruence is preserved under $+$,
                  Lemma~\bref{mod_congruence_lem })}\\
     & = \meval{\lefbrk e_1 \sumsym e_2 \rhtbrk}{b}
          & \text{(def of $\meval{\lefbrk e_1 \sumsym e_2 \rhtbrk}{b}$)}\\
     & = \meval{e}{m}
          & \text{(the current case of $e$)}
\end{align*}

\textbf{constructor case} $(e \text{ is } \lefbrk e_1 \prodsym  e_2 \rhtbrk)$:  similar.

\textbf{constructor case} $(e \text{ is } \minussym \lefbrk e_1 \rhtbrk)$:  similar.

\end{proof}
\end{solution}

\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput
