\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{PS_composition_to_bijection}
  \pcomment{by estick from: S02.ps3}
  \pcomment{total function f added by ARM 2/22/12}
\end{pcomments}

\pkeywords{
  composition
  surjection
  injection
  bijection
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}

Let $f: A \to B$ and $g: B \to C$ be functions.

\bparts
  
\ppart Prove that if the composition $g \compose f$ is a bijection,
then $f$ is a total injection and $g$ is a surjection.

\begin{staffnotes}
Allow $g$ to be an arbitrary relation, $G$.  Add a part asking for an
example showing that $f$ need not be a surjection and $G$ need not be
total or a function.  (Soln: let $B$ have an element not in the range
of $f$ with no $G$-arrow out, and another element not in the range of
$f$ with two $G$-arrows out.)
\end{staffnotes}

\begin{solution}

\begin{proof}
Let $h= g \compose f$.  This means there is an $h$-arrow from $A$ to
$C$ wherever there is an $f$-arrow from $A$ to $B$ that connects to a
$g$-arrow from $B$ to $C$.

In particular, since $h$ is total, there must be an $f$-arrow out of
every element of $A$, so
\begin{itemize}
\item $f$ is also total.
\end{itemize}

Also, since $h$ is a surjection, there must be a $g$-arrow into every
element of $C$, so
\begin{itemize}
\item $g$ is also a surjection.
\end{itemize}

Moreover, since $f$ is a function, the arrow out of any given element
of $A$ is unique.  Further, since $h$ is total, the unique arrow out
of any given element of $A$ must connect to a $g$-arrow.

Now if the unique $f$-arrows out of two different elements of $A$
ended at the same element of $B$, then they would connect to the same
$g$-arrow, and so $h$-arrows starting at the two different elements of
$A$ would end at the same element of $C$, contradicting the fact that
$h$ is an injection.  Therefore, 
\begin{itemize}
\item $f$ must be an injection.
\end{itemize}

Note that we did not require the assumption that $g$ is a function.

\iffalse
\ppart 


%Diego's arrow draft

by definition of $h$ if there is an $h$-arrow from some element $a\in
A$ to $c\in C$, then there exists an element $b\in B$ such that there
is an $f$-arrow from $a$ to $b$ and there is an $g$-arrow from $b$ to
$c$.  Suppose that $h$ is a bijection.

We first show that $f$ is total. Consider some $a\in A$. As $h$ is
total, there is an $h$-arrow departing from $a$. Thus, there exists a
$b$ such that there is an $f$-arrow from $a$ to $b$. Then, for any
$a\in A$ there is at least one $f$-arrow departing from it, so $f$ is
total.

Second, we show that $f$ is injective. Assume by contradiction that $f
$ is not injective. Then, there is a $b\in B$ and two distinct
elements $a_1,a_2\in A$, such that there is an $f$-arrow from both
$a_1,a_2$ to $b$.  As $h$ is a total function, there exists $c_1,c_2$
such that there is an $h$-arrow from $a_1$ to $c_1$, and another from
$a_2$ to $c_2$. Moreover, as $h$ is injective $c_1$ and $c_2$ must be
different.  Thus, there must be an $f$-arrow from $a_1$ to $b$ and a
$g$-arrow from $b$ to $c_1$, and there must be an $f$-arrow from $a_2$
to $b$ and a $g$-arrow from $b$ to $c_2$.  As $c_1,c_2$ are
diffferent, there are at least two $g$-arrows departing from $b$. This
contradicts the fact that $g$ is a function.

Finally, we show that $g$ is surjective. Consider some $c\in C$. As
$h$ is surjective, there exists an $a\in A$ such that there is an
$h$-arrow from $a$ to $c$. Thus, there exists a $b\in B$ such that
there is an $g$-arrow from $b$ to $c$. Then, there is at least one
$g$-arrow arriving to any $c\in C$, so $g$ is surjective.
\fi

%Suppose that $g \compose f$ is a bijection.
%
%Then $f$ must be total, since if $f(a)$ is undefined for some $a \in
%A$, then so is $g(f(a)) = (g \compose f)(a)$, contradicting the fact
%that $g \compose f$ is a bijection.
%
%Now assume for the purpose of contradiction that $f$ is not an
%injection.  Then there exist \emph{distinct} elements $a_1, a_2 \in
%A$, such that $f(a_1) = f(a_2)$.  This implies that $g(f(a_1)) =
%g(f(a_2))$.  Therefore, $g \compose f$ is not an injection and thus
%not a bijection.  This is a contradiction; therefore, $f$ must be an
%injection.
%
%Now assume for the purpose of contradiction that $g$ is not a
%surjection.  Then there exists an element $c \in C$ such that for all
%$b \in B$, $g(b) \neq c$.  Therefore, for all $a \in A$, $g(f(a)) \neq
%c$.  This implies that $g \compose f$ is not a surjection and thus not a
%bijection.  This is again a contradiction; therefore, $g$ must be a
%surjection.
\end{proof}
\end{solution}

\problempart Show there is a total injection, $f$, and a bijection,
$g$, such that $g \compose f$ is not a bijection.

\begin{solution}
Here is an example:
\begin{align*}
A & = \set{ 1 } \\
B & = \set{ 1, 2 } \\
C & = \set{ 1, 2 } \\[\smallskipamount]
f(x) & \eqdef x \\
g(x) & \eqdef x
\end{align*}
\end{solution}

\eparts

\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput
