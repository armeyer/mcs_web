\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{PS_fill_bucket_gcd}
  \pcomment{from: F04.ps3.06}
  \pcomment{updated by Rich to use terms in the notes}
\end{pcomments}

\pkeywords{
  gcd
  linear_combinations
  divides
  number_theory
  common_divisor
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
  
  Suppose that you have an $a$-gallon bucket and a $b$-gallon bucket
  where $a \leq b$.  You also have access to a fountain.  The goal of 
  this problem is to prove that you \emph{can} measure out exactly 
  $n$ gallons in one bucket provided $n$ is a multiple of 
  $\gcd(a, b)$ and $0 \leq n \leq b$.

  Getting exactly $b$ gallons is easy: fill the $b$-gallon bucket.
  For all other quantities, we'll just keep repeating the following
  procedure:

  \begin{enumerate}
    \item Fill the $a$-gallon bucket.
    \item Pour the entire contents of the $a$-gallon bucket into the
    $b$-gallon bucket, dumping out the $b$-gallon bucket whenever it
    becomes full.
  \end{enumerate}

  \bparts

  \ppart\label{waterbk} Give a concise expression for the amount of water in the
  $b$-gallon bucket after $k$ repetitions of this procedure.

  \begin{solution}
    $\rem{ka}{b}$
  \end{solution}

  \ppart\label{abkrange0b} Suppose that $a$ and $b$ are relatively prime.  Show that this
  expression never takes on the same value twice as $k$ ranges over the
  $[0,b)$.

  \begin{solution}
 Assume for the purpose of contradiction that $\rem{k_1 a}{b} =
 \rem{k_2 a}{b}$ for some $k_1 \neq k_2$ where $k_1, k_2 \in [0,b)$.
   This means $k_1 a \equiv k_2 a \pmod{b}$, which implies that $k_1
   \equiv k_2 \pmod{b}$ since $a$ and $b$ are relatively prime.  Since
   no two values in $[0,b)$ are congruent modulo $b$, we must have
     $k_1 = k_2$, which is a contradiction.
  \end{solution}

  \ppart Show that the expression in part~\eqref{waterbk} takes on
  \emph{all} values in $[0,b)$ as $k$ ranges over the set $[0,b)$.  In
      other words, every number of gallons between 0 and $b - 1$ is
      obtained within $b - 1$ repetitions of the procedure.

  \begin{solution}
    The expression takes on $b$ values in the range $[0,b)$ by the
      definition of remainder, and these values are all distinct by
      part~\eqref{abkrange0b}.  Thus, it must take on \emph{every}
      value in the range exactly once.
  \end{solution}

  \ppart\label{nonnegmultsgcdab} Now suppose $a$ and $b$ are not relatively prime.  Prove that
  the values this expression takes on are exactly the nonnegative
  multiples of $\gcd(a, b)$ less than $b$.

  You may find it helpful to isolate the common and relatively prime
  parts of $a$ and $b$.  Specifically, define $a'$ and $b'$ so that $a =
  a' \gcd(a, b)$ and $b = b' \gcd(a, b)$.  Note that $a'$ and $b'$ are
  relatively prime; otherwise, $a$ and $b$ would have a greater common
  divisor.

  \begin{solution}
    Each term in the sequence:
    %
    \[
    \rem{0 a}{b}, \qquad \rem{1 a}{b}, \qquad \rem{2 a}{b}, \qquad \dots,
    \qquad \rem{(b'-1) a}{b}
    \]
    %
    can be rewritten as follows:
    %
    \begin{align*}
    \rem{k a}{b} & = \rem{k a' \gcd(a, b)}{b' \gcd(a, b)} \\
        & = \gcd(a, b) \cdot (\rem{k a'}{b'})
    \end{align*}
The first step is substitution and the second uses the familiar fact
that
\[
\rem{nx}{mx} = \rem{n}{m}
\]
for all $x \in \integers$.  Thus, each term in the sequence above is
$\gcd(a, b)$ times the corresponding term in the sequence below:
\[
\rem{0 a'}{b'}, \qquad \rem{1 a'}{b'}, \qquad \rem{2 a'}{b'}, \qquad
\ldots, \qquad \rem{(b'-1) a'}{b'}
\]

By part~\eqref{nonnegmultsgcdab}, this is a permutation of $[0,b')$.
  Thus, the original sequence is a permutation of:
    %
    \[
    0 \cdot \gcd(a, b), \qquad
    1 \cdot \gcd(a, b), \qquad
    2 \cdot \gcd(a, b), \qquad
    \dots, \qquad
    (b' - 1) \cdot \gcd(a, b)
    \]
    %
    And these are the nonnegative multiple of $\gcd(a, b)$ less than $b$.
  \end{solution}

  \eparts
  
\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput
