\documentclass[problem]{mcs}

\begin{pcomments}
\pcomment{MQ_sets_to_membership_no_intro-latexbugs}
\pcomment{temporary backup buggy version, 3/26/13}
\end{pcomments}

\pkeywords{
  logic
  set_theory
  identity
  propositional
  chain_of_iff
  difference
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
  You've seen how certain set identities follow from corresponding
  propositional equivalences.  For example, you proved by a chain of
  iff's that
  \[
  (A-B) \union (A \intersect B) = A
  \]
  using the fact that the propositional formula $(P \QAND \bar{Q}) \QOR (P
  \QAND Q)$ is equivalent to $P$.

State a similar propositional equivalence that would justify the key
step in a proof for the following set equality organized as a chain of
iff's:.
\begin{equation}\label{A-BcompA-compC}
\setcomp{A-B} =
\paren{\setcomp{A} - \setcomp{C}} \union
\paren{B \intersect C}    \union
\paren{\paren{\setcomp{A} \union B} \intersect \setcomp{C}}
\end{equation}

(You are \emph{not} being asked to write out an iff-proof of the
equality or to write out a proof of the propositional equivalence.
Just state the equivalence.)

\begin{solution}
The needed propositional equivalence is that
\begin{align}
& \QNOT\paren{P \QAND \bar{Q}} \notag\\
& \qquad \text{is equivalent to}\label{QNPABQ}\\
& \paren{\paren{\bar{P} \QAND \QNOT(\bar{R})} \QOR \paren{Q \QAND R} \QOR
  \paren{\paren{\bar{P} \QOR Q}\QAND \bar{R}}}.\notag
\end{align}

This problem illustrates the clear correspondence set equalities
involving operations, like union and set difference, and corresponding
propositional equivalences.  The correspondence reduces set equality
proofs to proofs of propositional equivalence, allowing for automatic
proofs of such set equalities.

Notice that you were \textbf{not} expected to write out a proof of the
set equality.  But to remind you how the propositional equivalence
would be used, we've written out the full proof below.

\begin{proof}
The equality follows from the fact that
\begin{equation}\label{aea-bQIFF}
x \in \setcomp{A-B}\quad \qiff\quad
x \in \paren{\setcomp{A}-\setcomp{C}} \union \paren{B\intersect C} \union
      \paren{\paren{\setcomp{A}\union B}\intersect\setcomp{C}},
\end{equation}
for all $x$.

To prove~\eqref{aea-bQIFF}, let's define three propositions describing
the membership of $x$ in each of the sets $A$, $B$, and $C$:
\begin{eqnarray*}
P & \eqdef & x\in A,\\
Q & \eqdef & x\in B,\\
R & \eqdef & x\in C.
\end{eqnarray*}
Now, express membership in $\setcomp{A-B}$ in terms of $P$, $Q$, and $R$:
\begin{align*}
\lefteqn{x \in \setcomp{A-B}}\\
 & \qiff \QNOT\paren{x \in A-B}
     & \text{(def of set complement)}\\
 & \qiff \QNOT\paren{x \in \paren{A\intersect\setcomp{B}}}
     & \text{(def of $A-B$)}\\
 & \qiff \QNOT\paren{x \in A \QAND x \in \setcomp{B}}
     & \text{(def of intersection)}\\
 & \qiff \QNOT\paren{x \in A \QAND \QNOT\paren{x \in B}}
     & \text{(def of set complement)}\\
 & \qiff \QNOT\paren{P \QAND \bar{Q}}.
\end{align*}
Then express membership in
\[
\paren{\setcomp{A} - \setcomp{C}} \union \paren{B \intersect C} \union
\paren{\paren{\setcomp{A}\union B} \intersect \setcomp{C}}
\]
in terms of $P$, $Q$, and $R$:
\begin{align*}

\lefteqn{x \in \paren{\setcomp{A}-\setcomp{C}} \union \paren{B
    \intersect C} \union \paren{\paren{\setcomp{A} \union B}
    \intersect \setcomp{C}}}\\
 & \qiff x \in \paren{\setcomp{A}-\setcomp{C}} \QOR x \in
\paren{B\intersect C} \QOR x \in \paren{\paren{\setcomp{A}\union
    B}\intersect\setcomp{C}}\\

 & \qiff x \in \paren{\setcomp{A}\intersect \setcomp{\setcomp{C}}} \QOR x \in \paren{B\intersect C} \QOR \paren{x \in \paren{\setcomp{A}\union B}\QAND x\in \setcomp{C}}\\
 & \qiff \paren{x \in \setcomp{A}\QAND\ x \in \setcomp{\setcomp{C}}} \QOR x \in \paren{B\intersect C} \QOR \paren{x \in \paren{\setcomp{A}\union B}\QAND x\in \setcomp{C}}\\
 & \qiff \QNOT(x \in A) \QAND \QNOT(x \in \setcomp{C})} \QOR x \in \paren{B\intersect C} \QOR \paren{x \in \paren{\setcomp{A}\union B}\QAND x\in \setcomp{C}}\\
 & \qiff \QNOT(P)\QAND \QNOT(x \in \setcomp{C})} \QOR \paren{Q\QAND\ R} \QOR \paren{\paren{x \in \setcomp{A} \QOR Q}\QAND \QNOT(R)}\\
 & \qiff \paren{\QNOT(P) \QAND \QNOT(x \in \setcomp{C})} \QOR \paren{Q \QAND R} \QOR \paren{\paren{\QNOT\paren{P \QOR Q}\QAND \QNOT\paren{R}}}\\
 & \qiff \paren{\bar{P}\QAND \QNOT(\bar{R})} \QOR \paren{Q\QAND R} \QOR \paren{\paren{\bar{P} \QOR Q}\QAND \bar{R}}
\end{align*}

The membership equivalence~\eqref{aea-bQIFF} now follows
from the propositonal equivalence~\eqref{QNPABQ}.
\end{proof}

\end{solution}

\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput
