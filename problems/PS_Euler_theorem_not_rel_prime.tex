\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{PS_Euler_theorem_not_rel_prime}
  \pcomment{by Drew Wolpert}
  \pcomment{edited by ARM 3/9/12, 3/24/13}
\end{pcomments}

\pkeywords{
  Euler_theorem
  Eulers_theorem
  number_theory
  modular_arithmetic
  prime_power
  phi_function
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
In this problem we'll prove that for all integers $a, m$ where $m>1$,
\begin{equation}\label{amam-phim}
a^{m} \equiv a^{m - \phi(m)} \pmod{m}.
\end{equation}
Note that $a$ and $m$ need not be relatively prime.

Assume $m = p_1^{k_1} \cdots p_n^{k_n}$ for distinct primes,
$p_1,\dots,p_n$ and positive integers $k_1,\dots,k_n$.

\bparts

\ppart\label{pinotda} Show that if $p_i$ does not divide $a$, then
\[
a^{\phi(m)} \equiv 1 \pmod {p_i^{k_i}}.
\]

\begin{solution}

\begin{align*}
a^{\phi(m)}
   & = a^{\phi(p_i^{k_i}) \cdot \phi(m/p_i^{k_i})}\\
   & = \paren{a^{\phi(p_i^{k_i})}}^{\phi(m/p_i^{k_i})}\\
   & \equiv 1^{\phi(m/p_i^{k_i})} \pmod {p_i^{k_i}}
       & \text{(Euler's Theorem, since $\gcd(a, p_i) = 1$)}\\
   & = 1,
\end{align*}

\end{solution}

\ppart\label{pida} Show that if $p_i \divides a$ then
\begin{equation}\label{amphim0}
a^{m-\phi(m)} \equiv 0 \pmod {p_i^{k_i}}.
\end{equation}

\begin{solution}
Since $p_i \divides a$, we have $p_i^{k_i} \divides a^{k_i}$.  That is
\[
a^{k_i} \equiv 0 \pmod {p_i^{k_i}}, 
\]
and hence
\[
a^n \equiv  0 \pmod {p_i^{k_i}}
\]
for any $n \geq k_i$.  So we need only show that $m-\phi(m) \geq k_i$.
But $m-\phi(m)$ is the number of integers in $[0,m)$ that are
  \emph{not} relatively prime to $m$, and there are at least $k_i$ of
  them, namely, $0, p_i, p_i^2, \dots, p_i^{k_i-1}$.
\end{solution}

\ppart Conclude~\eqref{amam-phim} from the facts above.

\hint $a^m-a^{m-\phi(m)} = a^{m-\phi(m)}(a^{\phi(m)}-1)$.

\begin{solution}
Let $b \eqdef a^m-a^{m-\phi(m)}$.  So~\eqref{amam-phim} holds iff $b
\equiv 0 \pmod m$.  But using the hint that $b = cd$ where $c \eqdef
a^{m-\phi(m)}$ and $d \eqdef a^{\phi(m)}-1$, we have from
part~\eqref{pinotda} that
\begin{align*}
c & \equiv 0 \pmod {p_i^{k_i}}, & \text{if $p_i$ does not divide $a$, and}\\
d & \equiv 0 \pmod {p_i^{k_i}}, & \text{if $p_i \divides a$},
\end{align*}
so in any case,
\[
b = cd \equiv 0 \pmod {p_i^{k_i}}\qquad \text{for $1 \le i ]le n$}.
\]
This implies that $b \equiv 0$ modulo the product $p_1^{k_1} \cdots
p_n^{k_n}$, namely
\[
b \equiv 0 \pmod m\, .
\]
\end{solution}

\eparts
\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput
